<!doctype html>
<html lang="en">
<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hotspot Debug Inline — Idol Explorer</title>
<style>
body{font-family:Arial,system-ui;padding:12px;background:#f3f4f6}
.container{max-width:1000px;margin:0 auto;background:white;padding:12px;border-radius:8px}
.imgWrap{position:relative;display:inline-block;border:1px solid #ddd}
#idol{display:block;max-width:100%;height:auto;user-select:none}
.marker{position:absolute;width:44px;height:44px;transform:translate(-50%,-50%);cursor:grab;z-index:40}
.marker .dot{width:34px;height:34px;border-radius:50%;background:#ffd54a;display:flex;align-items:center;justify-content:center;border:2px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,0.12)}
.panel{display:flex;gap:12px;align-items:center;margin-top:12px}
.info{font-size:14px;color:#374151}
button{padding:8px 12px;border-radius:8px;border:none;background:#2563eb;color:white;cursor:pointer}
small{display:block;color:#6b7280;margin-top:6px}
</style></head><body>
<div class="container">
  <h2>Hotspot Debug — Drag markers to adjust positions (Inline)</h2>
  <div class="imgWrap" id="imgWrap">
    <img id="idol" src="assets/durga.jpg">
  </div>
  <div class="panel">
    <div class="info">Click a marker to select it. Drag to move. Click <strong>Download</strong> to get updated hotspots.json.</div>
    <div style="flex:1"></div>
    <button id="downloadBtn">Download hotspots.json</button>
    <button id="resetBtn" style="background:#10b981">Reset to original</button>
  </div>
  <small>Tip: after adjusting, open the downloaded JSON and copy into your repo's assets/hotspots.json</small>
</div>

<script>
// Embedded hotspots (avoid fetch issues)
const HOTSPOTS = {"sawari": [{"id": "lion", "x": 0.51, "y": 0.61, "label": "Lion (Durga's Sawari)", "story_en": "Maa Durga rides the lion. It symbolizes courage and power.", "story_hi": "\u092e\u093e\u0901 \u0926\u0941\u0930\u094d\u0917\u093e \u0938\u093f\u0902\u0939 \u092a\u0930 \u0938\u0935\u093e\u0930 \u0939\u094b\u0924\u0940 \u0939\u0948\u0902; \u092f\u0939 \u0938\u093e\u0939\u0938 \u0914\u0930 \u0936\u0915\u094d\u0924\u093f \u0915\u093e \u092a\u094d\u0930\u0924\u0940\u0915 \u0939\u0948\u0964", "story_bn": "\u09ae\u09be \u09a6\u09c1\u09b0\u09cd\u0997\u09be \u09b8\u09bf\u0982\u09b9\u09c7 \u0986\u09b0\u09cb\u09b9\u09a3 \u0995\u09b0\u09c7\u09a8; \u098f\u099f\u09bf \u09b8\u09be\u09b9\u09b8 \u0993 \u09b6\u0995\u09cd\u09a4\u09bf\u09b0 \u09aa\u09cd\u09b0\u09a4\u09c0\u0995\u0964", "icon": "assets/lion.png"}, {"id": "mouse", "x": 0.12, "y": 0.78, "label": "Mouse (Ganesha's Sawari)", "story_en": "Ganesha's vehicle is the mouse \u2014 clever and quick.", "story_hi": "\u0917\u0923\u0947\u0936 \u0915\u093e \u0935\u093e\u0939\u0928 \u092e\u0942\u0937\u0915 \u0939\u0948 \u2014 \u091a\u093e\u0932\u093e\u0915 \u0914\u0930 \u0924\u0947\u091c\u0964", "story_bn": "\u0997\u09a3\u09c7\u09b6\u09c7\u09b0 \u09ac\u09be\u09b9\u09a8 \u0987\u0981\u09a6\u09c1\u09b0 \u2014 \u099a\u09be\u09b2\u09be\u0995 \u0993 \u09a6\u09cd\u09b0\u09c1\u09a4\u0964", "icon": "assets/mouse.png"}, {"id": "peacock", "x": 0.9, "y": 0.78, "label": "Peacock (Kartikeya's Sawari)", "story_en": "Kartikeya often rides a peacock, symbolizing beauty and pride.", "story_hi": "\u0915\u093e\u0930\u094d\u0924\u093f\u0915\u0947\u092f \u092e\u094b\u0930 \u092a\u0930 \u0938\u0935\u093e\u0930 \u0930\u0939\u0924\u0947 \u0939\u0948\u0902; \u092f\u0939 \u0938\u0941\u0902\u0926\u0930\u0924\u093e \u0914\u0930 \u0917\u0930\u094d\u0935 \u0915\u093e \u092a\u094d\u0930\u0924\u0940\u0915 \u0939\u0948\u0964", "story_bn": "\u0995\u09be\u09b0\u09cd\u09a4\u09bf\u0995\u09c7\u09af\u09bc \u09aa\u09cd\u09b0\u09be\u09af\u09bc\u0987 \u09ae\u09af\u09bc\u09c2\u09b0\u09c7 \u099a\u09a1\u09bc\u09c7\u09a8; \u098f\u099f\u09bf \u09b8\u09cc\u09a8\u09cd\u09a6\u09b0\u09cd\u09af \u0993 \u0997\u09cc\u09b0\u09ac\u09c7\u09b0 \u09aa\u09cd\u09b0\u09a4\u09c0\u0995\u0964", "icon": "assets/peacock.png"}], "weapons": [{"id": "trishul", "x": 0.52, "y": 0.28, "label": "Trishul (Trident)", "story_en": "The Trishul destroys evil and ignorance.", "story_hi": "\u0924\u094d\u0930\u093f\u0936\u0942\u0932 \u092c\u0941\u0930\u093e\u0908 \u0914\u0930 \u0905\u091c\u094d\u091e\u093e\u0928\u0924\u093e \u0915\u094b \u0928\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964", "story_bn": "\u09a4\u09cd\u09b0\u09bf\u09b6\u09c2\u09b2 \u0985\u09aa\u09a6\u09ae\u09a8\u09c7\u09b0 \u0993 \u0985\u099c\u09cd\u099e\u09a4\u09be\u09b0 \u09ac\u09bf\u09a8\u09be\u09b6 \u0998\u099f\u09be\u09af\u09bc\u0964", "icon": "assets/trishul.png"}, {"id": "sword", "x": 0.42, "y": 0.3, "label": "Sword", "story_en": "The sword represents knowledge which cuts through falsehood.", "story_hi": "\u0924\u0932\u0935\u093e\u0930 \u091c\u094d\u091e\u093e\u0928 \u0915\u093e \u092a\u094d\u0930\u0924\u093f\u0928\u093f\u0927\u093f\u0924\u094d\u0935 \u0915\u0930\u0924\u0940 \u0939\u0948 \u091c\u094b \u0905\u0938\u0924\u094d\u092f \u0915\u094b \u0915\u093e\u091f \u0926\u0947\u0924\u0940 \u0939\u0948\u0964", "story_bn": "\u09a4\u09b2\u09cb\u09af\u09bc\u09be\u09b0 \u09ae\u09bf\u09a5\u09cd\u09af\u09be\u09b0 \u09ac\u09bf\u09b0\u09c1\u09a6\u09cd\u09a7\u09c7 \u09b8\u09a4\u09cd\u09af\u09c7\u09b0 \u09aa\u09cd\u09b0\u09a4\u09c0\u0995\u0964", "icon": "assets/sword.png"}, {"id": "lotus", "x": 0.6, "y": 0.3, "label": "Lotus", "story_en": "The lotus stands for purity and spiritual consciousness.", "story_hi": "\u0915\u092e\u0932 \u092a\u0935\u093f\u0924\u094d\u0930\u0924\u093e \u0914\u0930 \u0906\u0927\u094d\u092f\u093e\u0924\u094d\u092e\u093f\u0915 \u091a\u0947\u0924\u0928\u093e \u0915\u093e \u092a\u094d\u0930\u0924\u0940\u0915 \u0939\u0948\u0964", "story_bn": "\u09aa\u09a6\u09cd\u09ae \u09aa\u09ac\u09bf\u09a4\u09cd\u09b0\u09a4\u09be \u0993 \u0986\u09a7\u09cd\u09af\u09be\u09a4\u09cd\u09ae\u09bf\u0995 \u099a\u09c7\u09a4\u09a8\u09be\u09b0 \u09aa\u09cd\u09b0\u09a4\u09c0\u0995\u0964", "icon": "assets/lotus.png"}], "gods": [{"id": "ganesha", "x": 0.08, "y": 0.48, "label": "Ganesha", "story_en": "Ganesha is the remover of obstacles and lord of beginnings.", "story_hi": "\u0917\u0923\u0947\u0936 \u092c\u093e\u0927\u093e\u0913\u0902 \u0915\u094b \u0926\u0942\u0930 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0914\u0930 \u0906\u0930\u092e\u094d\u092d \u0915\u0947 \u0926\u0947\u0935\u0924\u093e \u0939\u0948\u0902\u0964", "story_bn": "\u0997\u09a3\u09c7\u09b6 \u09ac\u09be\u0981\u09a7\u09be \u09a6\u09c2\u09b0\u0995\u09be\u09b0\u09c0 \u0993 \u09b8\u09c2\u099a\u09a8\u09c0\u09b0 \u09a6\u09c7\u09ac\u09a4\u09be\u0964", "icon": "assets/ganesha.png"}, {"id": "lakshmi", "x": 0.28, "y": 0.46, "label": "Lakshmi", "story_en": "Lakshmi is goddess of wealth and prosperity.", "story_hi": "\u0932\u0915\u094d\u0937\u094d\u092e\u0940 \u0927\u0928 \u0914\u0930 \u0938\u092e\u0943\u0926\u094d\u0927\u093f \u0915\u0940 \u0926\u0947\u0935\u0940 \u0939\u0948\u0902\u0964", "story_bn": "\u09b2\u0995\u09cd\u09b7\u09cd\u09ae\u09c0 \u09a7\u09a8 \u0993 \u09b8\u09ae\u09c3\u09a6\u09cd\u09a7\u09bf\u09b0 \u09a6\u09c7\u09ac\u09c0\u0964", "icon": "assets/lakshmi.png"}, {"id": "durga", "x": 0.5, "y": 0.18, "label": "Durga", "story_en": "Maa Durga is a powerful mother goddess who defeats evil.", "story_hi": "\u092e\u093e\u0901 \u0926\u0941\u0930\u094d\u0917\u093e \u090f\u0915 \u0936\u0915\u094d\u0924\u093f\u0936\u093e\u0932\u0940 \u092e\u093e\u0924\u0943\u0926\u0947\u0935\u0940 \u0939\u0948\u0902 \u091c\u094b \u092c\u0941\u0930\u093e\u0908\u092f\u094b\u0902 \u092a\u0930 \u0935\u093f\u091c\u092f \u092a\u093e\u0924\u0940 \u0939\u0948\u0902\u0964", "story_bn": "\u09ae\u09be \u09a6\u09c1\u09b0\u09cd\u0997\u09be \u098f\u0995\u099c\u09a8 \u09b6\u0995\u09cd\u09a4\u09bf\u09b6\u09be\u09b2\u09c0 \u09ae\u09be\u09af\u09bc\u09be\u09b0\u09c2\u09aa\u09c0 \u09a6\u09c7\u09ac\u09c0 \u09af\u09bf\u09a8\u09bf \u09aa\u09be\u09aa \u09a6\u09c2\u09b0 \u0995\u09b0\u09c7\u09a8\u0964", "icon": "assets/lion.png"}, {"id": "saraswati", "x": 0.72, "y": 0.46, "label": "Saraswati", "story_en": "Saraswati is goddess of knowledge, music, and arts.", "story_hi": "\u0938\u0930\u0938\u094d\u0935\u0924\u0940 \u091c\u094d\u091e\u093e\u0928, \u0938\u0902\u0917\u0940\u0924 \u0914\u0930 \u0915\u0932\u093e \u0915\u0940 \u0926\u0947\u0935\u0940 \u0939\u0948\u0902\u0964", "story_bn": "\u09b8\u09b0\u09b8\u09cd\u09ac\u09a4\u09c0 \u099c\u09cd\u099e\u09be\u09a8, \u09b8\u0982\u0997\u09c0\u09a4 \u0993 \u0995\u09b2\u09be\u09b0 \u09a6\u09c7\u09ac\u09c0\u0964", "icon": "assets/saraswati.png"}, {"id": "kartikeya", "x": 0.92, "y": 0.46, "label": "Kartikeya", "story_en": "Kartikeya is a warrior god and commander of the gods.", "story_hi": "\u0915\u093e\u0930\u094d\u0924\u093f\u0915\u0947\u092f \u090f\u0915 \u092f\u094b\u0926\u094d\u0927\u093e \u0926\u0947\u0935\u0924\u093e \u0914\u0930 \u0926\u0947\u0935\u0924\u093e\u0913\u0902 \u0915\u0947 \u0938\u0947\u0928\u093e\u092a\u0924\u093f \u0939\u0948\u0902\u0964", "story_bn": "\u0995\u09be\u09b0\u09cd\u09a4\u09bf\u0995\u09c7\u09af\u09bc \u098f\u0995 \u09af\u09cb\u09a6\u09cd\u09a7\u09be \u09a6\u09c7\u09ac\u09a4\u09be \u0993 \u09a6\u09c7\u09ac\u09a4\u09be\u09a6\u09c7\u09b0 \u0985\u09a7\u09bf\u09a8\u09be\u09af\u09bc\u0995\u0964", "icon": "assets/kartikeya.png"}]};

// Helper to flatten all lists
function allHotspots(){ return HOTSPOTS.sawari.concat(HOTSPOTS.weapons).concat(HOTSPOTS.gods); }

function initMarkers(){
  const wrap = document.getElementById('imgWrap');
  allHotspots().forEach(h=>{
    const m = document.createElement('div'); m.className='marker'; m.dataset.id=h.id;
    m.innerHTML = '<div class="dot"><img src="'+(h.icon||'assets/lion.png')+'" style="width:20px;height:20px"/></div>';
    wrap.appendChild(m);
    positionMarker(m, h.x, h.y);
    makeDraggable(m,h);
    m.addEventListener('click', (ev)=>{ ev.stopPropagation(); showInfo(h); });
  });
}

function positionMarker(m, x, y){
  m.style.left = (x*100) + '%'; m.style.top = (y*100) + '%';
}

function makeDraggable(m,h){
  let dragging=false, rect=null;
  m.addEventListener('mousedown', (e)=>{ dragging=true; m.style.cursor='grabbing'; rect = document.getElementById('idol').getBoundingClientRect(); e.preventDefault(); });
  window.addEventListener('mousemove', (e)=>{ if(!dragging) return; const dx = e.clientX - rect.left; const dy = e.clientY - rect.top; const nx = Math.max(0, Math.min(rect.width, dx))/rect.width; const ny = Math.max(0, Math.min(rect.height, dy))/rect.height; h.x = nx; h.y = ny; positionMarker(m, nx, ny); });
  window.addEventListener('mouseup', ()=>{ if(dragging){ dragging=false; m.style.cursor='grab'; } });
  m.addEventListener('touchstart', (e)=>{ dragging=true; rect = document.getElementById('idol').getBoundingClientRect(); }, {passive:true});
  window.addEventListener('touchmove', (e)=>{ if(!dragging) return; const t = e.touches[0]; const dx = t.clientX - rect.left; const dy = t.clientY - rect.top; const nx = Math.max(0, Math.min(rect.width, dx))/rect.width; const ny = Math.max(0, Math.min(rect.height, dy))/rect.height; h.x = nx; h.y = ny; positionMarker(m, nx, ny); }, {passive:true});
  window.addEventListener('touchend', ()=>{ dragging=false; });
}

function showInfo(h){ alert(h.id + "\nLabel: " + h.label + "\nCurrent x: " + h.x.toFixed(3) + " y: " + h.y.toFixed(3)); }

document.getElementById('downloadBtn').addEventListener('click', ()=>{
  const data = JSON.stringify(HOTSPOTS, null, 2);
  const blob = new Blob([data], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'hotspots.json'; a.click();
  URL.revokeObjectURL(url);
});

document.getElementById('resetBtn').addEventListener('click', ()=>{ location.reload(); });

window.addEventListener('load', initMarkers);
</script>
</body></html>
